
{% extends 'base.html' %}
{% load static %}
{% block title %}SuperDash {% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/dash_superuser.css' %}"> 
    <link rel="stylesheet" href="{% static 'css/tabs.css' %}">
    <link rel="stylesheet" href="{% static 'css/listas.css' %}">
    <link rel="stylesheet" href="{% static 'css/mensagens.css' %}">  
{% endblock %}

<!--Bloco P√°gina -->
{% block content %}
{% include 'components/navbar_superuser.html' %}

    <div id="toast-container">
        {% for message in messages %}
            {% with message.tags as tag %}
                <div class="toast 
                    {% if 'success' in tag %}toast-success{% elif 'error' in tag or 'danger' in tag %}toast-error
                    {% elif 'info' in tag %}toast-info
                    {% elif 'warning' in tag %}toast-warning
                    {% else %}toast-info{% endif %}">
                    <span>{{ message }}</span>
                    <button class="toast-close" onclick="this.parentElement.remove()">√ó</button>
                </div>
            {% endwith %}
        {% endfor %}
    </div>

    
    <div class="dashboard-container">
        <!--Tabs-->
        <div class="tabs">
            <button class="tab-link active" data-tab="superdash">SuperDash</button>
            <button class="tab-link" data-tab="anuidades">Anuidades</button>


        </div>

        <div class="tab-content active" id="tab-superdash">
            <div>
                <h1>Bem-vindo ao Dashboard do Superusu√°rio</h1>
                <p>Este √© o painel de controle para superusu√°rios.</p>
            </div>

        </div>        

        <div class="tab-content" id="tab-anuidades">
            <header class="dashboard-header">
                <h1>Anuidades</h1>
                <div class="dashboard-links">
                <a href="{% url 'app_anuidades:create_anuidade' %}" class="dashboard-link">‚ûï Cadastrar Anuidade</a>
                -- <a href="{% url 'app_anuidades:list_anuidades' %}" class="dashboard-link">üìÑ Lista de Anuidades</a>
                -- <a href="#" class="dashboard-link">üìä Lista Triangular</a>
                -- <a href="#" class="dashboard-link">üí≥ Pagamentos Efetuados</a>
                </div><br>
                <div class="header-widgets">
                    <div class="widget">
                        <h2>Anuidades Lan√ßadas</h2>
                        <p class="widget-value">{{ qtd_anos_lancados }}</p>
                    </div>
                    <div class="widget">
                        <h2>Qtd Aplicadas</h2>
                        <p class="widget-value">{{ total_anuidades_aplicadas }}</p>
                    </div>
                    <div class="widget">
                        <h2>Arrecada√ß√£o</h2>
                        <p class="widget-value">{{ total_valor_aplicado|floatformat:2 }}</p>
                    </div>
                </div>

            </header>
            <section class="dashboard-section">
                <div class="section-content">
                
                    <div class="widget">
                        <h2>Cadastrados</h2>
                        <p class="widget-value">{{ total_cadastrados }}</p>
                    </div>
                    <div class="widget">
                        <h2>Ativos</h2>
                        <p class="widget-value">{{ associados_ativos }}</p>
                    </div>
                    <div class="widget">
                        <h2>Aposentados</h2>
                        <p class="widget-value">{{ associados_aposentados }}</p>
                    </div>
                    <div class="widget">
                        <h2>Pagantes</h2>
                        <p class="widget-value">{{ total_pagantes }}</p>
                    </div>                    
                </div>
            </section>

            <section class="dashboard-section">
                <div class="section-content">
                    <div class="card">
                        <h3>Valor Arrecado</h3>
                        <p class="card-value">37</p>
                    </div>
                    <div class="card">
                        <h3>Descontos</h3>
                        <p class="card-value">48</p>
                    </div>
                    <div class="card">
                        <h3>Inadimplentes</h3>
                        <p class="card-value">1‚ÄØ102</p>
                    </div>
                    <div class="card">
                        <h3>Em dia</h3>
                        <p class="card-value">95</p>
                    </div>
                    <div class="card">
                        <h3>√Å Receber</h3>
                        <p class="card-value">95</p>
                    </div>                
                </div>
            </section>

            <section class="dashboard-section">
                <h2>Lan√ßamentos</h2>
                <table class="table-list-small">
                    <thead>
                        <tr>
                            <th>Ano</th>
                            <th>Valor Unit√°rio</th>
                            <th>Qtd Aplicadas</th>
                            <th>Valor Total Ano</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in dados_por_ano %}
                        <tr>
                            <td>{{ item.ano }}</td>
                            <td>R$ {{ item.valor_unitario|floatformat:2 }}</td>
                            <td>{{ item.qtd_aplicadas }}</td>
                            <td>R$ {{ item.valor_total_ano|floatformat:2 }}</td>
                        </tr>
                        {% empty %}
                        <tr><td colspan="4">Nenhuma anuidade lan√ßada.</td></tr>
                        {% endfor %}
                    </tbody>
                </table>
            </section>
        </div>
    </div>

{% block extra_js %}
    <script src="{% static 'js/tabs.js' %}"></script>

{% endblock %}
{% endblock %}