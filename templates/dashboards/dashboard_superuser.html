
{% extends 'base.html' %}
{% load static %}
{% block title %}SuperDash {% endblock %}
{% load moeda %}


{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/associado.css' %}"> <!-- Cards-->
    <link rel="stylesheet" href="{% static 'css/dash_superuser.css' %}"> 
    <link rel="stylesheet" href="{% static 'css/tabs.css' %}">
    <link rel="stylesheet" href="{% static 'css/listas.css' %}">
    <link rel="stylesheet" href="{% static 'css/mensagens.css' %}">  
    <link rel="stylesheet" href="{% static 'css/responsive_patch.css' %}">
{% endblock %}

<!--Bloco P√°gina -->
{% block content %}
{% include 'components/navbar_superuser.html' %}

    <div class="dashboard-container">
        <div id="toast-container">
            {% for message in messages %}
                {% with message.tags as tag %}
                    <div class="toast 
                        {% if 'success' in tag %}toast-success{% elif 'error' in tag or 'danger' in tag %}toast-error
                        {% elif 'info' in tag %}toast-info
                        {% elif 'warning' in tag %}toast-warning
                        {% else %}toast-info{% endif %}">
                        <span>{{ message }}</span>
                        <button class="toast-close" onclick="this.parentElement.remove()">√ó</button>
                    </div>
                {% endwith %}
            {% endfor %}
        </div>

        <!--Tabs-->
        <div class="tabs">
            <button class="tab-link active" data-tab="superdash">SuperDash</button>
            <button class="tab-link" data-tab="anuidades">Anuidades</button>
            <button class="tab-link" data-tab="automacoes">Automa√ß√µes</button>
            <button class="tab-link" data-tab="defesos">Defesos</button>
            <button class="tab-link" data-tab="despesas">Despesas</button>

        </div>
        <!--SuperDash-->
        <div class="tab-content active" id="tab-superdash">

            <div class="dashboard-section">
                <small>Este √© o painel de controle vis√≠vel apenas para superusu√°rios.</small>
                <h4>Links R√°pidos</h4>
                <div class="section-content">
                    <div class="card">
                        <h3>Lista de Associados</h3>
                        <a href="{% url 'app_associados:list_associados' %}" class="btn-action">Ver Lista</a>
                    </div>
                    <div class="card">
                        <h3>Lista de Servi√ßos</h3>
                        <a href="{% url 'app_servicos:list_servicos' %}" class="btn-action">Ver Lista</a>
                    </div>
                    <div class="card">
                        <h3>Lan√ßamentos INSS</h3>
                        <a href="{% url 'app_inss:lancamentos_inss' %}" class="btn-action">Acessar</a>
                    </div>
                    <div class="card">
                        <h3>Lan√ßamentos REAP</h3>
                        <a href="{% url 'app_reap:lancamentos_reap' %}" class="btn-action">Acessar</a>
                    </div>
                    <div class="card">
                        <h3>Lan√ßamentos DEFESO</h3>
                        <a href="{% url 'app_defeso:lancamento_defeso' %}" class="btn-action">Acessar</a>
                    </div>
                    <div class="card">
                        <h3>Inserir em Grupo</h3>
                        <a href="{% url 'app_accounts:insert_user_group' %}" class="btn-action">Inserir</a>
                    </div>                    
                </div>
            </div>
              
            <div>
                <h3>M√©tricas da Apapesc</h3>
                {% include 'components/graficos/filiacoes_por_mes.html' %}

            </div>            

        </div>        

        <!--Anuidades-->
        <div class="tab-content" id="tab-anuidades">
            <header class="dashboard-header highlight-section">
                <h3>Anuidades</h3>
                <div class="dashboard-links">
                <a href="{% url 'app_anuidades:create_anuidade' %}" class="dashboard-link">‚ûï Cadastrar Anuidade</a>
                -- <a href="{% url 'app_anuidades:list_anuidades' %}" class="dashboard-link">üìÑ Lan√ßamentos Anuidades</a>
                -- <a href="{% url 'app_anuidades:list_buca_anuidades' %}" class="dashboard-link">üìù Lista Triangular</a>

                </div><br>
                <div class="header-widgets">
                    <div class="widget">
                        <h2>Anuidades Lan√ßadas</h2>
                        <p class="widget-value">{{ qtd_anos_lancados }}</p>
                    </div>
                    <div class="widget">
                        <h2>Qtd Aplicadas</h2>
                        <p class="widget-value">{{ total_anuidades_aplicadas }}</p>
                    </div>
                    <div class="card info">
                        <h3>Valores Aplicados</h3>
                        <p class="card-value">{{ total_valor_aplicado|moeda_br }}</p>
                    </div>
                </div>
            </header>
            <section class="dashboard-section highlight-section">
                <h3>Associados</h3>                
                <div class="section-content">
                    <div class="widget">
                        <h2>Cadastrados</h2>
                        <p class="widget-value">{{ total_cadastrados }}</p>
                    </div>
                    <div class="widget">
                        <h2>Ativos</h2>
                        <p class="widget-value">{{ associados_ativos }}</p>
                    </div>
                    <div class="widget">
                        <h2>Aposentados</h2>
                        <p class="widget-value">{{ associados_aposentados }}</p>
                    </div>
                    <div class="widget">
                        <h2>Pagantes</h2>
                        <p class="widget-value">{{ total_pagantes }}</p>
                    </div>                    
                </div>
            </section>

            <section class="dashboard-section highlight-section">
                <h3>Saldo</h3>  
                <div class="section-content">
                   <div class="card warning">
                        <h3>üîñ Descontos</h3>
                        <p class="card-value">{{ total_descontos_concedidos|moeda_br }}</p>
                    </div>                    
                    <div class="card positive">
                        <h3>üí∞ Valor Arrecado</h3>
                        <p class="card-value">{{ valor_anuidades_pagas|moeda_br }}</p>
                    </div>
                    <div class="card positive">
                        <h3>‚úÖ Anuidades Pagas</h3>
                        <p class="card-value">{{ total_anuidades_pagas }}</p>
                    </div>
                    <div class="card negative">
                        <h3>‚ö†Ô∏è Em Aberto</h3>
                        <p class="card-value">{{ total_anuidades_nao_pagas }}</p>
                    </div>
                    <div class="card negative">
                        <h3>üì• √Ä Receber</h3>
                        <p class="card-value">{{ valor_anuidades_aberto|moeda_br }}</p>
                    </div>                
                </div>
            </section>

            <section class="dashboard-section">
                <h2>Lan√ßamentos</h2>
                <table class="table-list-small">
                    <thead>
                        <tr>
                            <th>Ano</th>
                            <th>Valor Unit√°rio</th>
                            <th>Qtd Aplicadas</th>
                            <th>Valor Total Ano</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in dados_por_ano %}
                        <tr>
                            <td>{{ item.ano }}</td>
                            <td>R$ {{ item.valor_unitario|moeda_br }}</td>
                            <td>{{ item.qtd_aplicadas }}</td>
                            <td>R$ {{ item.valor_total_ano|moeda_br }}</td>
                        </tr>
                        {% empty %}
                        <tr><td colspan="4">Nenhuma anuidade lan√ßada.</td></tr>
                        {% endfor %}
                    </tbody>
                </table>
            </section>
        </div>
        <div class="tab-content" id="tab-automacoes">
            <h1>Automa√ß√µes</h1>

            <section class="dashboard-section highlight-section">
                <h2>üìÇ Bases</h2>
                <div class="section-content">
                    <div class="card info">
                        <h3>üóÇÔ∏è Lista Automa√ß√µes</h3>
                        <p>Visualize os registros extra√≠dos dos PDFs base</p>
                        <a href="{% url 'app_automacoes:lista_automacoes' %}" class="btn-action">Acessar</a>
                    </div>
                </div>
            </section>

            <section class="dashboard-section highlight-section">
                <h2>‚öôÔ∏è Automa√ß√µes em Massa</h2>
                <div class="section-content">
                    <div class="card warning">
                        <h3>üìä Processos em Massa</h3>
                        <p>Executar opera√ß√µes em lote</p>
                        <a href="#" class="btn-action">Em breve</a>
                    </div>
                </div>
            </section>

            <section class="dashboard-section highlight-section">
                <h2>üè¢ Apapesc</h2>
                <div class="section-content">
                    <div class="card">
                        <h3>üß† Outras automa√ß√µes</h3>
                        <p>Scripts e integra√ß√µes diversas da Apapesc</p>
                        <a href="#" class="btn-action">Ver</a>
                    </div>
                </div>
            </section>
        </div>

        <div class="tab-content" id="tab-defesos">

            <div class="detail-section two-cols">
                <div class="links-fasts">
                    <h2>Formul√°rios de Cria√ß√£o</h2>

                    <p><strong style="color:green;">Benef√≠cio:</strong> 
                        <a href="{% url 'app_defeso:create_beneficio' %}" class="btn-action">‚ûï  Novo</a>
                    </p>
                    <hr>
                    <p><strong>Lei Federal:</strong> 
                        <a href="{% url 'app_defeso:create_lei_federal' %}" class="btn-action">Nova</a>
                    </p>
                    <p><strong>Decreto:</strong> 
                        <a href="{% url 'app_defeso:create_decreto' %}" class="btn-action">Novo</a>
                    </p>
                    <p><strong>Portaria:</strong> 
                        <a href="{% url 'app_defeso:create_portaria' %}" class="btn-action">Nova</a>
                    </p>
                    <p><strong>Esp√©cie:</strong> 
                        <a href="{% url 'app_defeso:create_especie' %}" class="btn-action">Nova</a>
                    </p>
                    <p><strong>Per√≠odo:</strong> 
                        <a href="{% url 'app_defeso:create_periodo' %}" class="btn-action">Novo</a>
                    </p>
                    <p><strong>Instr. Normativa:</strong> 
                        <a href="{% url 'app_defeso:create_instrucao_normativa' %}" class="btn-action">Nova</a>
                    </p>
                </div>
                <div>
                {% include 'components/graficos/defeso_graficos/chart_concedido_negado.html' %}
                </div> 
            </div>
            <div class="detail-section three-cols">
                <div>
                {% include 'components/graficos/defeso_graficos/chart_status_beneficio.html' %}
                </div> 

                <div>
                {% include 'components/graficos/defeso_graficos/chart_status_processamento.html' %}
                </div> 

                <div>
                {% include 'components/graficos/defeso_graficos/chart_estados.html' %}
                </div> 
            </div>

            {% include 'components/defesos/listas_dados_defesos.html'%}
        </div>

        <div class="tab-content" id="tab-despesas">
            <h1>Despesas</h1>

            <section class="dashboard-section highlight-section">
                <h2>Links</h2>
                <a href="{% url 'app_despesas:list_despesas' %}" class="btn-action">Lista Despesas</a>
                <a href="{% url 'app_despesas:create_despesa' %}" class="btn-action">Nova Despesa</a>
            </section>

            <section class="dashboard-section">
                <h2>üìÇ Lista</h2>
                {% include 'components/despesas/lista_despesas_component.html' %}
            </section>
        </div>
       

    </div>

{% block extra_js %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{% static 'js/tabs.js' %}"></script>

    <script src="{% static 'js/graficos_defeso.js' %}"></script>

{% endblock %}
{% endblock %}